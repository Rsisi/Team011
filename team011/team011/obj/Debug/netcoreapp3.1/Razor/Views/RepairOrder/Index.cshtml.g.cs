#pragma checksum "/Users/christineloveyy/Gatech/Pratice/GIT/Team011/team011/team011/Views/RepairOrder/Index.cshtml" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "26aa2e8f0462c9bc8f7f16cf4bdea300c5afdbd4"
// <auto-generated/>
#pragma warning disable 1591
[assembly: global::Microsoft.AspNetCore.Razor.Hosting.RazorCompiledItemAttribute(typeof(AspNetCore.Views_RepairOrder_Index), @"mvc.1.0.view", @"/Views/RepairOrder/Index.cshtml")]
namespace AspNetCore
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Mvc;
    using Microsoft.AspNetCore.Mvc.Rendering;
    using Microsoft.AspNetCore.Mvc.ViewFeatures;
#nullable restore
#line 1 "/Users/christineloveyy/Gatech/Pratice/GIT/Team011/team011/team011/Views/_ViewImports.cshtml"
using team011;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "/Users/christineloveyy/Gatech/Pratice/GIT/Team011/team011/team011/Views/_ViewImports.cshtml"
using team011.Models;

#line default
#line hidden
#nullable disable
#nullable restore
#line 8 "/Users/christineloveyy/Gatech/Pratice/GIT/Team011/team011/team011/Views/RepairOrder/Index.cshtml"
using Microsoft.AspNetCore.Http;

#line default
#line hidden
#nullable disable
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"26aa2e8f0462c9bc8f7f16cf4bdea300c5afdbd4", @"/Views/RepairOrder/Index.cshtml")]
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"b6eceadba93b855566579e663d5cd9e6ca14d499", @"/Views/_ViewImports.cshtml")]
    public class Views_RepairOrder_Index : global::Microsoft.AspNetCore.Mvc.Razor.RazorPage<dynamic>
    {
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_0 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("id", new global::Microsoft.AspNetCore.Html.HtmlString("vinForm"), global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_1 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("class", new global::Microsoft.AspNetCore.Html.HtmlString("vin "), global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_2 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("id", new global::Microsoft.AspNetCore.Html.HtmlString("openRepairOrderForm"), global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_3 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("class", new global::Microsoft.AspNetCore.Html.HtmlString("row justify-content-md-center"), global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_4 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("style", new global::Microsoft.AspNetCore.Html.HtmlString("display:none"), global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_5 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("id", new global::Microsoft.AspNetCore.Html.HtmlString("createNewRepairForm"), global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        #line hidden
        #pragma warning disable 0649
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperExecutionContext __tagHelperExecutionContext;
        #pragma warning restore 0649
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperRunner __tagHelperRunner = new global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperRunner();
        #pragma warning disable 0169
        private string __tagHelperStringValueBuffer;
        #pragma warning restore 0169
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperScopeManager __backed__tagHelperScopeManager = null;
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperScopeManager __tagHelperScopeManager
        {
            get
            {
                if (__backed__tagHelperScopeManager == null)
                {
                    __backed__tagHelperScopeManager = new global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperScopeManager(StartTagHelperWritingScope, EndTagHelperWritingScope);
                }
                return __backed__tagHelperScopeManager;
            }
        }
        private global::Microsoft.AspNetCore.Mvc.TagHelpers.FormTagHelper __Microsoft_AspNetCore_Mvc_TagHelpers_FormTagHelper;
        private global::Microsoft.AspNetCore.Mvc.TagHelpers.RenderAtEndOfFormTagHelper __Microsoft_AspNetCore_Mvc_TagHelpers_RenderAtEndOfFormTagHelper;
        #pragma warning disable 1998
        public async override global::System.Threading.Tasks.Task ExecuteAsync()
        {
            WriteLiteral("\n");
#nullable restore
#line 5 "/Users/christineloveyy/Gatech/Pratice/GIT/Team011/team011/team011/Views/RepairOrder/Index.cshtml"
                                              
var currentUserRole = HttpContextAccessor.HttpContext.Session.GetString("loggedUserRole") as string;

#line default
#line hidden
#nullable disable
            WriteLiteral("\n");
            WriteLiteral("\n<div class=\"container\">\n    <div >\n            ");
            __tagHelperExecutionContext = __tagHelperScopeManager.Begin("form", global::Microsoft.AspNetCore.Razor.TagHelpers.TagMode.StartTagAndEndTag, "26aa2e8f0462c9bc8f7f16cf4bdea300c5afdbd45969", async() => {
                WriteLiteral(@"
                <div class=""form-group row"">
                    <div class=""col-sm-10"" style=""display:inline-flex"">

                        <input type=""text"" id=""txtvin"" placeholder=""Enter VIN Here"" class=""form-control"" value=""WBALY1C5XED787278"" />
                        <span class=""error"" style=""color:red; display:none"">*</span>

                    </div>

                    <div class=""col-sm-2"">
                        <input type=""button"" style=""bottom:0"" class=""btn btn-primary"" id=""btnsearchvehicle"" value=""Search"" />
                    </div>

                </div>
            ");
            }
            );
            __Microsoft_AspNetCore_Mvc_TagHelpers_FormTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.TagHelpers.FormTagHelper>();
            __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_TagHelpers_FormTagHelper);
            __Microsoft_AspNetCore_Mvc_TagHelpers_RenderAtEndOfFormTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.TagHelpers.RenderAtEndOfFormTagHelper>();
            __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_TagHelpers_RenderAtEndOfFormTagHelper);
            __tagHelperExecutionContext.AddHtmlAttribute(__tagHelperAttribute_0);
            __tagHelperExecutionContext.AddHtmlAttribute(__tagHelperAttribute_1);
            await __tagHelperRunner.RunAsync(__tagHelperExecutionContext);
            if (!__tagHelperExecutionContext.Output.IsContentModified)
            {
                await __tagHelperExecutionContext.SetOutputContentAsync();
            }
            Write(__tagHelperExecutionContext.Output);
            __tagHelperExecutionContext = __tagHelperScopeManager.End();
            WriteLiteral("\n\n\n        </div>\n    <div id=\"vehiclerepairs\" class=\"card card-body bg-light\" >\n       \n       \n        ");
            __tagHelperExecutionContext = __tagHelperScopeManager.Begin("form", global::Microsoft.AspNetCore.Razor.TagHelpers.TagMode.StartTagAndEndTag, "26aa2e8f0462c9bc8f7f16cf4bdea300c5afdbd48088", async() => {
                WriteLiteral("\n            <div class=\"col-sm-3\">\n                <div class=\"form-group row \">\n\n                    <div>\n\n                        <label>\n                            Start Date:\n                        </label>\n");
                WriteLiteral(@"                        <div>
                            <input class=""form-control"" disabled id=""txtstartdate"" />

                        </div>


                    </div>

                </div>
                <div class=""form-group row "">

                    <div>

                        <label>
                            Customer Name
                        </label>
");
                WriteLiteral(@"                        <div>
                            <input class=""form-control"" disabled id=""txtcustomerName"" />

                        </div>


                    </div>

                </div>
                <div class=""form-group row "">

                    <div>

                        <label>
                            Service Writer
                        </label>
");
                WriteLiteral(@"                        <div>
                            <input class=""form-control"" disabled id=""txtserviceWriter"" />

                        </div>


                    </div>

                </div>
                <div class=""form-group row "">

                    <div>

                        <label>
                            Labor Charge:
                        </label>
");
                WriteLiteral(@"                        <div>
                            <input class=""form-control"" type=""number"" id=""txtlaborcharge"" />
                            <span id=""laborchargeerror"" style=""color:red; display:none"">You cannot enter value less than previous value</span>

                        </div>


                    </div>

                </div>
                <div class=""form-group row "">
                    <div>
                        <label>Description:</label>
");
                WriteLiteral(@"                        <div>
                            <textarea class=""form-control"" id=""txtdescription""></textarea>

                        </div>

                    </div>

                </div>
            </div>
            <div class=""col-sm-8"">
                <div class=""form-group row "" id=""partsDetail"">
                    <div class=""col-sm-12"">
");
                WriteLiteral(@"

                        <table id=""tblParts"" class=""table table-striped table-bordered"" style=""width:100%"">
                            <thead>
                                <tr>
                                    <th>P/N</th>
                                    <th>Quantity</th>
                                    <th>Vendor</th>
                                    <th>Price</th>
");
                WriteLiteral(@"
                                </tr>
                            </thead>



                        </table>


                    </div>

                </div>

            </div>
          
            <div>
                <input type=""button"" id=""btnupdate"" class=""btn btn-primary"" value=""Update Repair"" />
               
                <input type=""button"" class=""btn btn-success"" value=""Complete Repair"" />
            </div>
        ");
            }
            );
            __Microsoft_AspNetCore_Mvc_TagHelpers_FormTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.TagHelpers.FormTagHelper>();
            __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_TagHelpers_FormTagHelper);
            __Microsoft_AspNetCore_Mvc_TagHelpers_RenderAtEndOfFormTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.TagHelpers.RenderAtEndOfFormTagHelper>();
            __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_TagHelpers_RenderAtEndOfFormTagHelper);
            __tagHelperExecutionContext.AddHtmlAttribute(__tagHelperAttribute_2);
            __tagHelperExecutionContext.AddHtmlAttribute(__tagHelperAttribute_3);
            __tagHelperExecutionContext.AddHtmlAttribute(__tagHelperAttribute_4);
            await __tagHelperRunner.RunAsync(__tagHelperExecutionContext);
            if (!__tagHelperExecutionContext.Output.IsContentModified)
            {
                await __tagHelperExecutionContext.SetOutputContentAsync();
            }
            Write(__tagHelperExecutionContext.Output);
            __tagHelperExecutionContext = __tagHelperScopeManager.End();
            WriteLiteral("\n\n        \n        \n        ");
            __tagHelperExecutionContext = __tagHelperScopeManager.Begin("form", global::Microsoft.AspNetCore.Razor.TagHelpers.TagMode.StartTagAndEndTag, "26aa2e8f0462c9bc8f7f16cf4bdea300c5afdbd412938", async() => {
                WriteLiteral("\n            \n            <div class=\"col-sm-12\">\n\n                <div class=\"form-group row \">\n\n\n                    <div>\n\n                        <label>\n                            odometer_value\n                        </label>\n");
                WriteLiteral(@"                        <div>
                            <input class=""form-control"" />
                        </div>


                    </div>

                </div>
                <div class=""form-group row "">
                    <div>
                        <label>Description:</label>
");
                WriteLiteral(@"                        <div>
                            <textarea class=""form-control"" id=""txtdescription""></textarea>

                        </div>

                    </div>

                </div>
                <div class=""form-group row "">
                    <div>
                        <div>
                            <input type=""button""  class=""btn btn-success"" value=""Create Repair Order"" />
                        </div>

                    </div>

                </div>

            </div>
          
        ");
            }
            );
            __Microsoft_AspNetCore_Mvc_TagHelpers_FormTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.TagHelpers.FormTagHelper>();
            __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_TagHelpers_FormTagHelper);
            __Microsoft_AspNetCore_Mvc_TagHelpers_RenderAtEndOfFormTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.TagHelpers.RenderAtEndOfFormTagHelper>();
            __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_TagHelpers_RenderAtEndOfFormTagHelper);
            __tagHelperExecutionContext.AddHtmlAttribute(__tagHelperAttribute_5);
            __tagHelperExecutionContext.AddHtmlAttribute(__tagHelperAttribute_4);
            await __tagHelperRunner.RunAsync(__tagHelperExecutionContext);
            if (!__tagHelperExecutionContext.Output.IsContentModified)
            {
                await __tagHelperExecutionContext.SetOutputContentAsync();
            }
            Write(__tagHelperExecutionContext.Output);
            __tagHelperExecutionContext = __tagHelperScopeManager.End();
            WriteLiteral(@"

        



    </div>

</div>


<script>
    parttable = $('#tblParts').DataTable()
    var laborcharge, description, VIN, stateDate, addpartCount = 0;
    $(document).ready(function () {
        $.noConflict();

        $('#btnsearchvehicle').on('click', function () {
            vin = $('#txtvin').val()
            console.log(vin)
            if (vin != null && vin != '') {
                searchbyVin(vin)
                $('.error').hide()

            }
            else {
                $('.error').show()
            }
        });

        $('#btnupdate').on('click', function (e) {
            e.preventDefault();
            var currentUserrole = '");
#nullable restore
#line 236 "/Users/christineloveyy/Gatech/Pratice/GIT/Team011/team011/team011/Views/RepairOrder/Index.cshtml"
                              Write(currentUserRole);

#line default
#line hidden
#nullable disable
            WriteLiteral(@"'
            updatedLaborcharge = $('#txtlaborcharge').val()
            updateDecription = $('#txtdescription').val()

            var newPartArray = [];
            console.log(addpartCount)
            for (let i = 1; i <= addpartCount; i++) {

                newPartArray.push({
                    VIN: VIN,
                    start_date: stateDate,
                    part_number: $(""#txtPN_""+i).val(),
                    quantity: $(""#txtQuantity_""+i).val(),
                    vendor: $(""#txtVendor_""+i).val(),
                    price: $(""#txtPrice_""+i).val()
                });

");
            WriteLiteral(@"

            }


           // newPartArray.push({})

            if (currentUserrole !== 'Owner') {
                if (updatedLaborcharge < laborcharge) {
                    $('#txtlaborcharge').val(laborcharge)
                    $(""#laborchargeerror"").show()
                    console.log('error')
                    return false
                }
                else {
                    $(""#laborchargeerror"").hide()
                    addPart(newPartArray)
                    updaterepairOrder(updatedLaborcharge, updateDecription, VIN, stateDate)
                    

                }
            }



        })
    });

       function searchbyVin(vin) {
        $.ajax({
            type: ""GET"",
            url: '");
#nullable restore
#line 288 "/Users/christineloveyy/Gatech/Pratice/GIT/Team011/team011/team011/Views/RepairOrder/Index.cshtml"
             Write(Url.Action("SearchOrderByVIN", "RepairOrder"));

#line default
#line hidden
#nullable disable
            WriteLiteral(@"',
            data: {
                'vin': vin,

            },
            success: function (response) {
               
                if (response.hasOpenOrder) {
                    $('#openRepairOrderForm').show();
                    $('#createNewRepairForm').hide()
                    $('#txtdescription').text(response.repairOrder.description)
                    $('#txtlaborcharge').val(response.repairOrder.labor_charge)
                    $('#txtstartdate').val(response.repairOrder.start_date)
                    $('#txtserviceWriter').val(response.repairOrder.repair_starter_name)

                    laborcharge = response.repairOrder.labor_charge
                    description = response.repairOrder.description
                    VIN = vin
                    stateDate = response.repairOrder.start_date
                    console.log(VIN)
                  //if has parts

                    if (parttable != null) {
                        parttable.destroy();


                        part");
            WriteLiteral(@"table = $('#tblParts').DataTable({
                            data: response.parts,
                            dom: ""<'row'<'col-sm-12 col-md-6'l><'col-sm-12 col-md-6'B>>"" +
                                ""<'row'<'col-sm-12'tr>>"" +
                                ""<'row'<'col-sm-12 col-md-5'i><'col-sm-12 col-md-7'p>>"",
                            //add addpart button
                            buttons: [
                                {
                                    text: 'Add Part',
                                    className:""btn btn-sm btn-primary"",
                                    action: function (e, dt, node, config) {

                                        addpartCount++
                                        var newRowHtml = '<tr>' +
                                            '<td> <input id=""txtPN_'+addpartCount+'"" style=""width:80%""></input> </td>' +
                                            '<td> <input type=""number"" id=""txtQuantity_'+addpartCount+'""  style=""width:80%""></input>");
            WriteLiteral(@" </td>' +
                                            '<td> <input id=""txtVendor_'+addpartCount+'"" style=""width:80%""></input> </td>' +
                                            '<td> <input type=""number"" id=""txtPrice_'+addpartCount+'"" style=""width:80%""></input> </td>' +

                                            '</tr>'

                                        dt.row.add($(newRowHtml)).draw();
                                    }
                                },

                            ],
                            ""autoWidth"": false,
                            columns: [
                                {
                                    data: ""part_number"",
                                    ""width"": ""30%"" },
                                {
                                    data: ""quantity"",
                                    ""width"": ""10%"" },
                                {
                                    data: ""vendor"",
                                    ""width"": ""20%"" },
    ");
            WriteLiteral("                            {\n                                    data: \"price\",\n                                    \"width\": \"20%\" },\n");
            WriteLiteral(@"
                            ],

                            language: {
                                ""zeroRecords"": ""Sorry, it looks like we don'thave that in stock!"",
                            }

                        })
                    };
                    //float add part button to right

                    $('.dt-buttons').addClass('float-right')
                    //remove the dt-button class from add part button

                    $('.dt-button').removeClass('dt-button')


                }
                else {
                    $('#openRepairOrderForm').hide();
                    $('#createNewRepairForm').show()

                }





            },


        });
    }


    function updaterepairOrder(updatelabor, updateDecription,  VIN,  start_date) {

        $.ajax({
            type: ""POST"",
            url: '");
#nullable restore
#line 405 "/Users/christineloveyy/Gatech/Pratice/GIT/Team011/team011/team011/Views/RepairOrder/Index.cshtml"
             Write(Url.Action("UpdateRepairOrder", "RepairOrder"));

#line default
#line hidden
#nullable disable
            WriteLiteral(@"',
            data: {
                'laborcharge': updatelabor, 'description': updateDecription,  'VIN': VIN,  'start_date':start_date
            },
            success: function (response) {
                if (response) {
                    laborcharge = updatelabor
                    description = updateDecription

                    addpartCount = 0

                }
                console.log(laborcharge + description)
            }



        })


    }

    function addPart(partArray) {

        $.ajax({
            type: ""POST"",
            url: '");
#nullable restore
#line 431 "/Users/christineloveyy/Gatech/Pratice/GIT/Team011/team011/team011/Views/RepairOrder/Index.cshtml"
             Write(Url.Action("AddPart", "RepairOrder"));

#line default
#line hidden
#nullable disable
            WriteLiteral(@"',
            data: {
                'parts': partArray
            },
            success: function (response) {
                if (response) {
                   console.log(response)
                    searchbyVin(VIN)
                }
               
            }



        })

    }
</script>");
        }
        #pragma warning restore 1998
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public IHttpContextAccessor HttpContextAccessor { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.ViewFeatures.IModelExpressionProvider ModelExpressionProvider { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IUrlHelper Url { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IViewComponentHelper Component { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IJsonHelper Json { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IHtmlHelper<dynamic> Html { get; private set; }
    }
}
#pragma warning restore 1591
